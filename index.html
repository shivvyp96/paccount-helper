<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OSRS P-Account Helper</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Press Start 2P', cursive;
    background: #1a1a1a;
    color: #fff;
    display: flex;
    margin: 0;
  }
  .container {
    display: flex;
    width: 100%;
    height: 100vh;
  }
  .tasks {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
    border-right: 2px solid #444;
  }
  .task-stack {
    width: 400px;
    background: #111;
    padding: 10px;
    overflow-y: auto;
  }
  .category {
    margin-bottom: 10px;
    border: 1px solid #444;
    border-radius: 5px;
    overflow: hidden;
  }
  .category h3 {
    background: #222;
    margin: 0;
    padding: 5px;
    cursor: pointer;
  }
  .category-content {
    display: none;
    padding: 5px;
  }
  input[type="checkbox"] {
    margin-right: 5px;
  }
  input[type="number"] {
    width: 50px;
    margin-left: 5px;
  }
  #search {
    width: calc(100% - 20px);
    margin-bottom: 10px;
    padding: 5px;
    font-family: 'Press Start 2P', cursive;
    font-size: 12px;
    border: 1px solid #444;
    background: #222;
    color: #fff;
  }
  button {
    font-family: 'Press Start 2P', cursive;
    font-size: 12px;
    padding: 5px;
    margin-top: 10px;
    cursor: pointer;
    background: #444;
    border: none;
    color: #fff;
  }
</style>
</head>
<body>
<div class="container">
  <div class="tasks">
    <input type="text" id="search" placeholder="Search tasks...">
    <!-- Tasks will be injected here -->
  </div>
  <div class="task-stack">
    <h3>Task Stack</h3>
    <ul id="stack"></ul>
    <button id="copyStack">Copy Stack</button>
  </div>
</div>

<script>
const taskData = {
  'Quests': [
    'Animal Magnetism', 'Merlins Crystal', 'Holy Grail', 'Dragon Slayer I', 'Lost City', 'What Lies Below',
    'The Dig Site', 'The Grand Tree', 'Goblin Diplomacy', 'RFD Goblins', 'Fairy Tale I', 'Bone Voyage',
    'Jungle Potion', 'The Ascent of Arceuus', 'Shilo Village', 'One Small Favour', 'Murder Mystery',
    'King\'s Ransom', 'The Tourist Trap', 'Temple of Ikov', 'Desert Treasure I', 'The Fremennik Trials',
    'Observatory Quest', 'Demon Slayer', 'Underground Pass', 'The Golem', 'Shadow of the Storm',
    'Ghosts Ahoy', 'Making History', 'Mountain Daughter', 'Hazeel Cult', 'Children of the Sun',
    'Prince Ali Rescue', 'Icthlarin\'s Little Helper', 'Enter the Abyss', 'Temple of the Eye',
    'Creature of Fenkenstrain', 'The Depths of Despair', 'The Queen of Thieves', 'Enlightened Journey',
    'Sheep Herder', 'Big Chompy Bird Hunting', 'RFD Ogre (Skrach Uglogwee)', 'RFD Evil Dave', 'RFD Pirate',
    'RFD Lumbridge Guide', 'RFD Monkey', 'RFD Sir Amik Varze', 'RFD Culinaromancer', 'Shield of Arrav',
    'Heroes Quest', 'Tower of Life', 'Clock Tower', 'Tribal Totem', 'Watchtower', 'Getting Ahead',
    'Pirate\'s Treasure', 'Scorpion Catcher', 'The Corsair Curse', 'Family Crest', 'The Garden of Death',
    'Monkey Madness I', 'The Forsaken Tower', 'Haunted Mine', 'Tale of the Righteous', 'Sleeping Giants',
    'Troll Romance', 'The Lost Tribe', 'Recruitment Drive', 'A Kingdom Divided', 'Death on the Isle',
    'Wanted!', 'Twilights Promise', 'Regicide', 'Roving Elves', 'Mournings End Part I', 'Mournings End Part II',
    'Ethically Acquired Antiquities', 'Daddy\'s Home', 'Lunar Diplomacy', 'In Search of the Myreque',
    'In Aid of the Myreque', 'Throne of Miscellania', 'Royal Trouble', 'The Hand in the Sand',
    'Zogre Flesh Eaters', 'Rum Deal', 'Cabin Fever', 'The Eyes of Glouphrie', 'The Slug Menace',
    'Below Ice Mountain', 'Eadgars Ruse', 'Garden of Tranquillity', 'A Soul\'s Bane', 'Shadows of Custodia',
    'Monkey Madness II', 'Tai Bwo Wannai Trio', 'Barbarian Training', 'The Fremennik Isles', 'Pandemonium',
    'Prying Times', 'Current Affairs', 'Mage Arena I', 'Mage Arena II'
  ],
  'Skills': {
    'Combat': ['Attack', 'Strength', 'Defence', 'Ranged', 'Magic', 'Prayer', 'Slayer'],
    'Gathering': ['Mining', 'Woodcutting', 'Fishing', 'Hunter', 'Farming'],
    'Artisan': ['Crafting', 'Smithing', 'Fletching', 'Herblore', 'Cooking', 'Firemaking', 'Construction'],
    'Support': ['Agility', 'Runecrafting', 'Thieving', 'Sailing']
  },
  'Diaries': ['Varrock Easy', 'Varrock Medium', 'Ardougne Easy', 'Ardougne Medium', 'Lumbridge Easy', 'Lumbridge Medium', 'Karamja Easy', 'Kourend Easy'],
  'Milestones': ['Dragon Defender', 'Rune Defender', 'Fairy Rings', 'Unlock Piety', 'Rogues Outfit', 'Rock Cake', 'Black Mask'],
  'Repeating': ['Birdhouse Runs', 'Tree Runs', 'Herb Runs', 'Seaweed Runs', 'Hop Runs', 'Compost Runs', 'Hespori', 'Kingdom of Miscellania'],
  'Minigames': ['Guardians of the Rift', 'Vale Totems', 'Mage Training Arena', 'Wintertodt', 'Motherlode Mine', 'Giant\'s Foundry'],
  'Acquisition': ['Molten glass', 'Oak logs', 'Willow logs', 'Maple logs', 'Silver bar', 'Gold bar', 'Iron ore', 'Unpowered orb', 'Dragon bones']
};

const tasksDiv = document.querySelector('.tasks');
const stack = document.getElementById('stack');
const search = document.getElementById('search');

function renderCategory(name, items, isSkill=false) {
  const cat = document.createElement('div');
  cat.className = 'category';
  const header = document.createElement('h3');
  header.textContent = name;
  header.addEventListener('click', () => {
    content.style.display = content.style.display === 'block' ? 'none' : 'block';
  });
  cat.appendChild(header);

  const content = document.createElement('div');
  content.className = 'category-content';

  if(isSkill){
    for(const group in items){
      const groupDiv = document.createElement('div');
      const groupHeader = document.createElement('strong');
      groupHeader.textContent = group;
      groupDiv.appendChild(groupHeader);
      items[group].forEach(skill => {
        const label = document.createElement('label');
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.value = skill;
        const input = document.createElement('input');
        input.type = 'number';
        input.placeholder = 'Lvl';
        input.min = 1;
        input.max = 99;
        checkbox.addEventListener('change', ()=>{
          if(checkbox.checked){
            stackItem(skill + (input.value ? ' ' + input.value : ''));
          } else {
            removeStackItem(skill);
          }
        });
        input.addEventListener('input', ()=>{
          if(checkbox.checked){
            updateStackItem(skill + ' ' + input.value);
          }
        });
        label.appendChild(checkbox);
        label.appendChild(document.createTextNode(skill));
        label.appendChild(input);
        groupDiv.appendChild(label);
        groupDiv.appendChild(document.createElement('br'));
      });
      content.appendChild(groupDiv);
    }
  } else {
    items.forEach(item => {
      const label = document.createElement('label');
      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.value = item;
      checkbox.addEventListener('change', ()=>{
        if(checkbox.checked){
          stackItem(item);
        } else {
          removeStackItem(item);
        }
      });
      label.appendChild(checkbox);
      label.appendChild(document.createTextNode(item));
      content.appendChild(label);
      content.appendChild(document.createElement('br'));
    });
  }

  cat.appendChild(content);
  tasksDiv.appendChild(cat);
}

function stackItem(item){
  const li = document.createElement('li');
  li.textContent = item;
  li.dataset.value = item;
  stack.appendChild(li);
}

function removeStackItem(item){
  const children = Array.from(stack.children);
  children.forEach(li=>{if(li.dataset.value===item) li.remove()});
}

function updateStackItem(value){
  const children = Array.from(stack.children);
  children.forEach(li=>{
    if(li.dataset.value.startsWith(value.split(' ')[0])){
      li.textContent = value;
      li.dataset.value = value;
    }
  });
}

// Render all categories
for(const cat in taskData){
  renderCategory(cat, taskData[cat], cat==='Skills');
}

// Search functionality
search.addEventListener('input', ()=>{
  const term = search.value.toLowerCase();
  document.querySelectorAll('.category-content label').forEach(label=>{
    label.style.display = label.textContent.toLowerCase().includes(term) ? 'block' : 'none';
  });
});

// Copy stack
document.getElementById('copyStack').addEventListener('click', ()=>{
  const text = Array.from(stack.children).map(li=>li.textContent).join('\n');
  navigator.clipboard.writeText(text);
  alert('Stack copied!');
});
</script>
</body>
</html>
