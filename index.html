<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>P‑Account Builder Helper</title>
<style>
body {
    font-family: "Trebuchet MS", sans-serif;
    background: #0f172a;
    color: #e2e8f0;
    margin: 0;
    display: flex;
    height: 100vh;
    overflow: hidden;
}
#left-panel {
    width: 380px;
    background: #1e293b;
    border-right: 2px solid #3b82f6;
    display: flex;
    flex-direction: column;
}
#left-panel input, #left-panel button {
    margin: 6px 10px;
}
#wiki-username {
    padding: 6px;
    border-radius: 5px;
    border: 1px solid #3b82f6;
    background: #0f172a;
    color: #e2e8f0;
    width: calc(100% - 32px);
}
#search {
    padding: 6px;
    border-radius: 5px;
    border: 1px solid #3b82f6;
    background: #0f172a;
    color: #e2e8f0;
    width: calc(100% - 32px);
}
.scroll-container {
    overflow-y: auto;
    flex-grow: 1;
    padding: 10px;
}
h2 {
    color: #3b82f6;
    margin: 0;
    padding: 10px 5px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    background: #1e293b;
    position: sticky;
    top: 0;
    border-bottom: 1px solid #3b82f6;
}
.arrow { transition: transform 0.2s; }
ul {
    list-style: none;
    padding-left: 10px;
    margin: 0 0 15px 0;
    display: none;
}
li {
    padding: 5px 0;
    cursor: pointer;
}
li.completed { color: #22c55e; text-decoration: line-through; }
li.incomplete { color: #f87171; }
.stacked-task {
    background: #1e293b;
    margin-bottom: 5px;
    padding: 5px;
    border-radius: 5px;
    font-family: monospace;
}
#right-panel {
    flex-grow: 1;
    padding: 15px;
    overflow-y: auto;
}
button {
    padding: 8px;
    border-radius: 5px;
    border: none;
    background: #3b82f6;
    color: #fff;
    cursor: pointer;
    margin: 3px 0;
}
button.secondary { background: #475569; }

.skills-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
    padding: 8px;
}

.skill-tile {
    background: #0f172a;
    border: 1px solid #334155;
    border-radius: 6px;
    padding: 6px;
    text-align: center;
    cursor: pointer;
    transition: all 0.15s ease;
}
.skill-tile:hover { border-color: #3b82f6; background: #1e293b; }
.skill-tile img { width: 32px; height: 32px; }
.skill-name { font-size: 11px; margin-top: 4px; color: #cbd5f5; }
.skill-level { font-size: 12px; color: #94a3b8; }
</style>
</head>
<body>

<div id="left-panel">
    <input type="text" id="wiki-username" placeholder="RuneLite WikiSync Username">
    <button onclick="importWikiSync()">Import WikiSync</button>
    <input type="text" id="search" placeholder="Filter quests & diaries..." oninput="filterLists()">
    <div class="scroll-container">

        <!-- Quests -->
        <h2 onclick="toggleSection('quests')">Quests <span class="arrow">▶</span></h2>
        <ul id="quests"></ul>

        <!-- Skills -->
        <h2 onclick="toggleSection('skills')">Skills <span class="arrow">▶</span></h2>
        <div class="skills-grid" id="skills-grid"></div>

        <!-- Achievement Diaries -->
        <h2 onclick="toggleSection('diaries')">Achievement Diaries <span class="arrow">▶</span></h2>
        <ul id="diaries"></ul>

    </div>
</div>

<div id="right-panel">
    <h2>Selected Tasks</h2>
    <div id="stacked-tasks"></div>
    <button onclick="copyAll()">Copy Full Stack</button>
    <button onclick="resetStack()" class="secondary">Reset Stack</button>
</div>

<script>

// ===== DATA LISTS =====
const ALL_SKILLS = [
    "attack","strength","defence","ranged","prayer","magic","hitpoints",
    "cooking","woodcutting","fletching","fishing","firemaking","crafting",
    "smithing","mining","herblore","agility","thieving","slayer","farming",
    "runecrafting","hunter","construction","sailing"
];

const ALL_QUESTS = [
"Cooks Assistant","Doric's Quest","Druidic Ritual","Imp Catcher","Dwarf Cannon",
"Natural History Quiz","Romeo and Juliet","Sea Slug","Sheep Shearer","The Feud",
"Witch's House","Witch's Potion","Black Knights' Fortress","Gertrude's Cat",
"Horror from the Deep","Elemental Workshop I","Death Plateau","Troll Stronghold",
"X Marks the Spot","Alfred Grimhands Barcrawl","Client of Kourend","The Restless Ghost",
"Rune Mysteries","Vampyre Slayer","Waterfall Quest","Plague City","Biohazard",
"The Knight's Sword","Ernest the Chicken","Monk's Friend","Fight Arena","Tree Gnome Village",
"Priest in Peril","Nature Spirit","RFD Cook","RFD Dwarf","Fishing Contest","A Porcine of Interest",
"Animal Magnetism","Merlins Crystal","Holy Grail","Dragon Slayer I","Lost City","What Lies Below",
"The Dig Site","The Grand Tree","Goblin Diplomacy","RFD Goblins","Fairy Tale I","Bone Voyage",
"Jungle Potion","The Ascent of Arceuus","Shilo Village","One Small Favour","Murder Mystery",
"King's Ransom","The Tourist Trap","Temple of Ikov","Desert Treasure I","The Fremennik Trials",
"Observatory Quest","Demon Slayer","Underground Pass","The Golem","Shadow of the Storm",
"Ghosts Ahoy","Making History","Mountain Daughter","Hazeel Cult","Children of the Sun",
"Prince Ali Rescue","Icthlarin's Little Helper","Enter the Abyss","Temple of the Eye",
"Creature of Fenkenstrain","The Depths of Despair","The Queen of Thieves","Enlightened Journey",
"Sheep Herder","Big Chompy Bird Hunting","RFD Ogre","RFD Evil Dave","RFD Pirate",
"RFD Lumbridge Guide","RFD Monkey","RFD Sir Amik Varze","RFD Culinaromancer","Shield of Arrav",
"Heroes Quest","Tower of Life","Clock Tower","Tribal Totem","Watchtower","Getting Ahead",
"Pirate's Treasure","Scorpion Catcher","The Corsair Curse","Family Crest","The Garden of Death",
"Monkey Madness I","The Forsaken Tower","Haunted Mine","Tale of the Righteous","Sleeping Giants",
"Troll Romance","The Lost Tribe","Recruitment Drive","A Kingdom Divided","Death on the Isle",
"Wanted!","Twilights Promise","Regicide","Roving Elves","Mournings End Part I","Mournings End Part II",
"Ethically Acquired Antiquities","Daddy's Home","Lunar Diplomacy","In Search of the Myreque",
"In Aid of the Myreque","Throne of Miscellania","Royal Trouble","The Hand in the Sand",
"Zogre Flesh Eaters","Rum Deal","Cabin Fever","The Eyes of Glouphrie","The Slug Menace",
"Below Ice Mountain","Eadgars Ruse","Garden of Tranquillity","A Soul's Bane","Shadows of Custodia",
"Monkey Madness II","Tai Bwo Wannai Trio","Barbarian Training","The Fremennik Isles","Pandemonium",
"Prying Times","Current Affairs","Mage Arena I","Mage Arena II"
];

const ALL_DIARIES = [
"Varrock Easy","Varrock Medium","Ardougne Easy","Ardougne Medium","Lumbridge Easy",
"Lumbridge Medium","Karamja Easy","Kourend Easy"
];

// ===== STATE =====
let wikiSkills = {};
let wikiQuests = {};
let wikiDiaries = {};

// ===== UI HELPERS =====
function addTask(task) {
    const div = document.createElement('div');
    div.className = 'stacked-task';
    div.textContent = task;
    document.getElementById('stacked-tasks').appendChild(div);
}

function copyAll() {
    const text = [...document.querySelectorAll('.stacked-task')]
        .map(d => d.textContent).join('\n');
    navigator.clipboard.writeText(text);
    alert('Copied Selected Tasks');
}

function resetStack() {
    document.getElementById('stacked-tasks').innerHTML = '';
}

// ===== IMPORT WIKISYNC =====
async function importWikiSync() {
    const username = document.getElementById('wiki-username').value.trim();
    if (!username) { alert('Enter WikiSync username'); return; }

    try {
        const res = await fetch(`https://sync.runescape.wiki/runelite/player/${encodeURIComponent(username)}/STANDARD`);
        if (!res.ok) throw new Error('Fetch failed');
        const data = await res.json();

        wikiSkills = data.levels || {};
        wikiQuests = data.quests || {};
        wikiDiaries = data.achievement_diaries || {};

        renderSkills();
        renderQuests();
        renderDiaries();

        alert('WikiSync Imported!');
    } catch(e) {
        console.error(e);
        alert('Failed to import WikiSync.');
    }
}

// ===== RENDER SKILLS =====
function renderSkills() {
    const grid = document.getElementById('skills-grid');
    grid.innerHTML = '';
    ALL_SKILLS.forEach(skill => {
        const lvl = wikiSkills[skill.toUpperCase()] || 1;
        const tile = document.createElement('div');
        tile.className = 'skill-tile';
        tile.onclick = () => addTask(`SKILL:${skill.toUpperCase()}:${lvl+1}`);
        tile.innerHTML = `
            <img src="icons/skills/${skill}.png" alt="${skill}">
            <div class="skill-name">${skill.toUpperCase()}</div>
            <div class="skill-level">Lvl ${lvl}</div>
        `;
        grid.appendChild(tile);
    });
}

// ===== RENDER QUESTS =====
function renderQuests() {
    const ul = document.getElementById('quests');
    ul.innerHTML = '';
    ALL_QUESTS.forEach(q => {
        const key = q.toUpperCase().replace(/ /g,'_').replace(/'|!/g,'');
        const status = wikiQuests[key];
        const li = document.createElement('li');
        li.className = (status === 2 ? 'completed' : 'incomplete');
        li.textContent = q;
        li.onclick = () => addTask(`QUEST:${key}`);
        ul.appendChild(li);
    });
}

// ===== RENDER DIARIES =====
function renderDiaries() {
    const ul = document.getElementById('diaries');
    ul.innerHTML = '';
    ALL_DIARIES.forEach(d => {
        const key = d.toUpperCase().replace(/ /g,'_');
        const complete = wikiDiaries[key];
        const li = document.createElement('li');
        li.className = complete ? 'completed' : 'incomplete';
        li.textContent = d;
        li.onclick = () => addTask(`DIARY:${key}`);
        ul.appendChild(li);
    });
}

// ===== FILTER LISTS =====
function filterLists() {
    const search = document.getElementById('search').value.toLowerCase();
    document.querySelectorAll('#quests li, #diaries li').forEach(li => {
        li.style.display = li.textContent.toLowerCase().includes(search) ? '' : 'none';
    });
}

// ===== SECTION TOGGLE =====
function toggleSection(id) {
    const el = document.getElementById(id);
    const arrow = el.previousElementSibling.querySelector('.arrow');
    el.style.display = el.style.display === 'block' ? 'none' : 'block';
    arrow.style.transform = el.style.display === 'block' ? 'rotate(90deg)' : 'rotate(0deg)';
}
</script>

</body>
</html>
